!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("MScroll",[],e):"object"==typeof exports?exports.MScroll=e():t.MScroll=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){t.exports=function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}t.exports=function(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}},function(t,e,i){"use strict";i.r(e);var s,o,r,n,l=i(0),h=i.n(l),a=i(1),f=i.n(a),c=(o=function(t){return parseFloat(s(t,"borderLeftWidth"))+parseFloat(s(t,"paddingLeft"))+parseFloat(s(t,"width"))+parseFloat(s(t,"paddingRight"))+parseFloat(s(t,"borderRightWidth"))},r=function(t){return parseFloat(s(t,"borderTopWidth"))+parseFloat(s(t,"paddingTop"))+parseFloat(s(t,"height"))+parseFloat(s(t,"paddingBottom"))+parseFloat(s(t,"borderBottomWidth"))},n=function(t,e,i){Object.defineProperty(t,e,{get:function(){return this["__"+e]},set:function(t){t!==this["__"+e]&&(this["__"+e]=t,i())}})},{on:function(t,e,i){if("string"==typeof e){var s=!!e.indexOf("touch")&&{passive:!1,capture:!1};return t.addEventListener(e,i,s)}for(var o=0;o<e.length;o++)t.addEventListener(e[o],i,!1)},off:function(t,e,i){if("string"==typeof e)return t.removeEventListener(e,i,!1);for(var s=0;s<e.length;s++)t.removeEventListener(e[s],i,!1)},css:s=function(t,e){return window.getComputedStyle(t,null)[e]},query:function(t){return"string"==typeof t?document.querySelector(t):t},range:function(t,e,i){return Math.min(Math.max(t,e),i)},prefix:function(t){return t in document.createElement("div").style?t:("webkit-"+t).replace(/-\D/g,(function(t){return t.charAt(1).toUpperCase()}))},observe:function(t,e,i){for(var s=0;s<e.length;s++)n(t,e[s],i)},width:o,height:r,outterWidth:function(t){return parseFloat(s(t,"marginLeft"))+o(t)+parseFloat(s(t,"marginRight"))},outterHeight:function(t){return parseFloat(s(t,"marginTop"))+r(t)+parseFloat(s(t,"marginBottom"))},getDirection:function(t,e){return t>e&&t>5?"horizontal":e>t&&e>5?"vertical":""}}),u=c.prefix("transition"),p=c.prefix("transform"),d=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h()(this,t);var s=Object.assign({},i);this.wrapper=c.query(e),this.wrapper&&(this.scroller=this.wrapper.children[0],this.vertical=s.vertical||!1,this.showScrollbar=s.showScrollbar||!1,this.scrollbarColor=s.scrollbarColor||"#000",this.scrollbarSize=s.scrollbarSize||3,this.scrollbarOpacity=s.scrollbarOpacity||.5,this.scrollTime=s.scrollTime||600,this.rollTime=s.rollTime||300,this.limitTime=s.limitTime||300,this.mouse=s.mouse||!1,this.wheel=s.wheel||!1,this.wheelStep=s.wheelStep||40,this.wheelTime=s.wheelTime||400,this.lazyload=s.lazyload||!1,this.attribute=s.attribute||"data-src",this.picker=s.picker||!1,this.index=s.index||0,this.setup=s.setup||function(){},this.scrollStart=s.scrollStart||function(){},this.scrollMove=s.scrollMove||function(){},this.scrollEnd=s.scrollEnd||function(){},this.$events={},this._init())}return f()(t,[{key:"_init",value:function(){this._initObserve(),this._initScrollbar(),this._initLazyLoad(),this._initEvent(),this.refresh(),this.offset=0}},{key:"_setup",value:function(){if(this.wrapperSize=this.vertical?this.wrapper.offsetHeight:this.wrapper.offsetWidth,"static"===c.css(this.wrapper,"position")&&(this.wrapper.style.position="relative"),"hidden"!==c.css(this.wrapper,"overflow")&&(this.wrapper.style.overflow="hidden"),this.vertical)this.scrollerSize=this.scroller.offsetHeight;else{var t=Math.ceil(Array.from(this.scroller.children).reduce((function(t,e){return t+c.outterWidth(e)}),0));this.scroller.style.width=t+"px",this.scrollerSize=t}this.maxOffset=this.wrapperSize-this.scrollerSize,this.maxOffset>0&&(this.maxOffset=0),this.minOffset=0,this.picker&&(this.count=this.scroller.children.length,this.itemSize=this.scrollerSize/this.count,this.diffCount=Math.floor(Math.ceil(this.wrapperSize/this.itemSize)/2),this.diffOffset=this.diffCount*this.itemSize,this.minOffset+=this.diffOffset,this.maxOffset-=this.diffOffset,this.pickTo(this.index)),this.$emit("setup")}},{key:"_start",value:function(t){t.stopPropagation(),this.startX=t.touches?t.touches[0].pageX:t.pageX,this.startY=t.touches?t.touches[0].pageY:t.pageY,this.startTime=Date.now(),this.startOffset=this.offset,this.moved=!0,this._resetTouch()}},{key:"_move",value:function(t){if(t.stopPropagation(),this.vertical&&t.preventDefault(),this.moved&&!this.locked){var e=t.touches?t.touches[0].pageX:t.pageX,i=t.touches?t.touches[0].pageY:t.pageY,s=0===this.moveX?0:e-this.moveX,o=0===this.moveY?0:i-this.moveY,r=Date.now();if(this.mouse){var n=t.touches?t.touches.clientX:t.clientX,l=t.touches?t.touches.clientY:t.clientY,h=this.wrapper.getBoundingClientRect();if(n<h.left||n>h.right||l<h.top||l>h.bottom)return this._end(t)}var a=this.vertical?o:s;if(this.moveOffset+=a,this.moveX=e,this.moveY=i,""==this.direction&&(this.direction=c.getDirection(Math.abs(e-this.startX),Math.abs(i-this.startY))),!this.vertical){if("vertical"===this.direction)return;"horizontal"===this.direction&&t.preventDefault()}!this.moving&&Math.abs(this.moveOffset)<10||(this.moving||(this.moving=!0,this.$emit("scrollStart",this.offset)),(this.offset>this.minOffset||this.offset<this.maxOffset)&&(a/=4),this.offset+=a,r-this.startTime>this.limitTime&&(this.startTime=r,this.startOffset=this.offset))}}},{key:"_end",value:function(t){if(t.stopPropagation(),this.moved)if(this.moved=!1,this.moving){if(this._resetPosition()){var e=Date.now()-this.startTime;if(e<this.limitTime&&Math.abs(this.moveOffset)>10){var i=this._momentum(this.offset-this.startOffset,e);return this.scrollTo(i,this.scrollTime)}if(this.picker)return this.scrollTo(this._pickIndex(this.offset),this.rollTime);this.$emit("scrollEnd",this.offset,this.maxOffset)}}else this.$emit("scrollCancel")}},{key:"_resetTouch",value:function(){this.moveX=0,this.moveY=0,this.direction="",this.moving=!1,this.moveOffset=0,this.duration=0}},{key:"_resetPosition",value:function(){var t=this;return!(!this.picker&&(this.offset>this.minOffset?(setTimeout((function(){t.scrollTo(t.minOffset,t.rollTime)}),0),1):this.offset<this.maxOffset&&(setTimeout((function(){t.scrollTo(t.maxOffset,t.rollTime)}),0),1)))}},{key:"_resize",value:function(){var t=this,e=this.maxOffset,i=this.offset;this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout((function(){t.refresh(),t.scrollTo(t.maxOffset*(i/e),0)}),100)}},{key:"_momentum",value:function(t,e){var i=Math.abs(t/e),s=this.offset+i/.003*(t<0?-1:1);return this.picker?this._pickIndex(s):(s<this.maxOffset?s=this.maxOffset-this.wrapperSize/20:s>this.minOffset&&(s=this.minOffset+this.wrapperSize/20),Math.round(s))}},{key:"_scrollEnd",value:function(){this._resetPosition()&&this.$emit("scrollEnd",this.offset,this.maxOffset)}},{key:"_setTransition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.scroller.style[u]=0!=t?"all "+t+"ms":"",this.$emit("scrollTime",t)}},{key:"_setTransform",value:function(t){this.scroller.style[p]=this.vertical?"translate3d(0px, "+t+"px, 0px)":"translate3d("+t+"px, 0px, 0px)",this.$emit("scrollMove",t)}},{key:"_initEvent",value:function(){c.on(this.wrapper,"touchstart",this.start=this._start.bind(this)),c.on(this.wrapper,"touchmove",this.move=this._move.bind(this)),c.on(this.wrapper,"touchend",this.end=this._end.bind(this)),c.on(this.scroller,["transitionend","webkitTransitionEnd"],this.transitionEnd=this._scrollEnd.bind(this)),c.on(window,"resize",this.resize=this._resize.bind(this)),this.wheel&&c.on(this.wrapper,["wheel","mousewheel","DOMMouseScroll"],this.mousewheel=this._wheel.bind(this)),this.mouse&&(c.on(this.wrapper,"mousedown",this.start),c.on(document,"mousemove",this.move),c.on(document,"mouseup",this.end)),this.$on("setup",this.setup),this.$on("scrollStart",this.scrollStart),this.$on("scrollMove",this.scrollMove),this.$on("scrollEnd",this.scrollEnd)}},{key:"_initObserve",value:function(){var t=this;c.observe(this,["offset","duration"],(function(){t._setTransition(t.duration),t._setTransform(t.offset)}))}},{key:"_initScrollbar",value:function(){var t=this;if(this.showScrollbar){var e=document.createElement("div"),i=document.createElement("div");e.style.cssText="position:absolute;z-index:1818;opacity:0;overflow:hidden;",i.style.cssText="position:absolute;left:0;top:0;background:".concat(this.scrollbarColor,";opacity:").concat(this.scrollbarOpacity,";border-radius:").concat(this.scrollbarSize,"px;"),this.vertical?(e.style.cssText+="top:0;bottom:0;right:3px;width:".concat(this.scrollbarSize,"px;"),i.style.cssText+="width:".concat(this.scrollbarSize,"px;")):(e.style.cssText+="left:0;right:0;bottom:2px;height:".concat(this.scrollbarSize,"px;"),i.style.cssText+="height:".concat(this.scrollbarSize,"px;")),e.appendChild(i),this.wrapper.appendChild(e);var s=1,o=null,r=null,n=function(){(s=t.wrapperSize/t.scrollerSize)>1&&(s=1),i.style[t.vertical?"height":"width"]=t.wrapperSize*s+"px"},l=function(){e.style[u]="all 200ms",e.style.opacity=1},h=function(){e.style[u]="all 600ms",e.style.opacity=0};this.$on("refresh",(function(){setTimeout(n,100)})),this.$on("scrollTime",(function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i.style[u]=0!=t?"all "+t+"ms":""}(t)})),this.$on("scrollMove",(function(e){!function(e){i.style[p]=t.vertical?"translate3d(0px, "+-e*s+"px, 0px)":"translate3d("+-e*s+"px, 0px, 0px)"}(e)})),this.$on("scrollStart",(function(){clearTimeout(r),o=setTimeout(l,100)})),this.$on("scrollEnd",(function(){clearTimeout(o),r=setTimeout(h,900)}))}}},{key:"_initLazyLoad",value:function(){var t=this;if(this.lazyload){var e=this.wrapper,i=this.scroller.children,s=i.length,o=function(e){if(e&&!e.__loaded){var i=e.getElementsByTagName("img"),s=i.length;if(s){e.__loaded=!0;for(var o=0;o<s;o++){var r=i[o];r.getAttribute(t.attribute)&&(r.classList.add("loaded"),r.setAttribute("src",r.getAttribute(t.attribute)),r.removeAttribute(t.attribute))}}}},r=function(){for(var r=0;r<s;r++){var n=i[r];if(!n.__loaded){var l=n.getBoundingClientRect(),h=e.getBoundingClientRect();(t.vertical?l.top<h.bottom&&l.bottom>h.top:l.left<h.right&&l.right>h.left)&&o(n)}}};this.$on("setup",(function(){r()})),this.$on("scrollEnd",(function(){r()}))}}},{key:"_wheel",value:function(t){var e=this;t.stopPropagation(),t.preventDefault();var i=1,s=this.offset;t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),s+=-i*this.wheelStep,(s=c.range(s,this.maxOffset,this.minOffset))!=this.offset&&(this.$emit("scrollStart"),this.scrollTo(this.picker?this._pickIndex(s):s,this.wheelTime),this._wheelTimer&&clearTimeout(this._wheelTimer),this._wheelTimer=setTimeout((function(){e.$emit("scrollEnd",e.offset,e.maxOffset)}),this.wheelTime))}},{key:"_pickIndex",value:function(t){var e=c.range(t,this.maxOffset,this.minOffset),i=Math.round(-e/this.itemSize);return this.index=c.range(i+this.diffCount,0,this.count-1),-i*this.itemSize}},{key:"pickTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=c.range(t,0,this.count-1),s=-(i-this.diffCount)*this.itemSize,o=c.range(s,this.maxOffset,this.minOffset);this.index=i,this.offset=o,this.duration=e}},{key:"$emit",value:function(t){if(this.$events[t]){var e=this.$events[t].length;if(e)for(var i=0;i<e;i++)this.$events[t][i].apply(this,[].slice.call(arguments,1))}}},{key:"$on",value:function(t,e){this.$events[t]||(this.$events[t]=[]),this.$events[t].push(e)}},{key:"$off",value:function(t,e){if(this.$events[t]){var i=this.$events[t].indexOf(e);i>-1&&this.$events[t].splice(i,1)}}},{key:"refresh",value:function(){this._setup(),this.$emit("refresh")}},{key:"scrollTo",value:function(t,e){this.offset=t,this.duration=e}},{key:"moveTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=c.query(t);if(s){var o=this.vertical?-s.offsetTop:-s.offsetLeft;if(i){var r=this.vertical?s.offsetHeight:s.offsetWidth;o+=(this.wrapperSize-r)/2}(o=c.range(o,this.maxOffset,this.minOffset))!=this.offset&&this.scrollTo(o,e)}}},{key:"destroy",value:function(){this.destroyed=!0,this.$emit("destroy"),this.$events={},c.off(this.wrapper,"touchstart",this.start),c.off(this.wrapper,"touchmove",this.move),c.off(this.wrapper,"touchend",this.end),c.off(this.scroller,["transitionend","webkitTransitionEnd"],this.transitionEnd),c.off(window,"resize",this.resize),this.wheel&&c.off(this.wrapper,["wheel","mousewheel","DOMMouseScroll"],this.mousewheel),this.mouse&&(c.off(this.wrapper,"mousedown",this.start),c.off(document,"mousemove",this.move),c.off(document,"mouseup",this.end))}}]),t}();e.default=d}]).default},function(t,e,i){"use strict";i.r(e);var s=i(0),o=i.n(s),r={name:"vue-mscroll",props:{vertical:{type:Boolean,default:!1},scrollbar:{type:Boolean,default:!1},scrollbarColor:{type:String,default:"#000"},scrollbarSize:{type:Number,default:3},scrollbarOpacity:{type:Number,default:.5},lazyload:{type:Boolean,default:!1},attribute:{type:String,default:"data-src"},mouse:{type:Boolean,default:!1},wheel:{type:Boolean,default:!1},wheelStep:{type:Number,default:40},wheelTime:{type:Number,default:400},picker:{type:Boolean,default:!1},index:{type:Number,default:0},scrollTime:{type:Number,default:600},rollTime:{type:Number,default:300}},mounted:function(){var t=this;this.$nextTick((function(){!t.scroll&&t.initScroll()}))},beforeDestroy:function(){this.scroll&&this.scroll.destroy()},methods:{initScroll:function(){var t=this;o.a?(this.scroll=new o.a(this.$refs.wrapper,{vertical:this.vertical,showScrollbar:this.scrollbar,scrollbarSize:this.scrollbarSize,scrollbarColor:this.scrollbarColor,scrollbarOpacity:this.scrollbarOpacity,lazyload:this.lazyload,attribute:this.attribute,mouse:this.mouse,wheel:this.wheel,wheelStep:this.wheelStep,wheelTime:this.wheelTime,picker:this.picker,index:this.index,scrollTime:this.scrollTime,rollTime:this.rollTime,setup:function(){t.$emit("setup")},scrollStart:function(e){t.$emit("scrollstart",e)},scrollMove:function(e){t.$emit("scrollmove",e)},scrollEnd:function(e,i){t.$emit("scrollend",e,i)}}),this.scroll.$on("scrollEnd",(function(e,i){e===i&&t.$emit("loadmore")}))):console.log("need MScroll: npm i -S @eyeear/mscroll")},refresh:function(){this.scroll&&this.scroll.refresh()},scrollTo:function(t,e){this.scroll&&this.scroll.scrollTo(t,e)},moveTo:function(t,e,i){this.scroll&&this.scroll.moveTo(t,e,i)},pickTo:function(t,e){this.scroll&&this.scroll.pickTo(t,e)},getIndex:function(){return this.scroll?this.scroll.index:-1}},render:function(t){return t("div",{ref:"wrapper",style:{overflow:"hidden"}},this.$slots.default)}};e.default=r,"undefined"!=typeof window&&window.Vue&&window.Vue.component("m-scroll",r)}])}));